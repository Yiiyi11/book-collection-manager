<!DOCTYPE html>
<<<<<<< HEAD
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图书收藏管理系统</title>
=======
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Collection Management System</title>
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css">
</head>
<body class="container mt-4">
<<<<<<< HEAD
  <!-- 页面标题与操作区 -->
  <header class="mb-4">
    <h1 class="text-center mb-3">我的图书收藏</h1>
    <div class="d-flex justify-content-between align-items-center">
      <a href="add-book.html" class="btn btn-success">添加新图书</a>
      <a href="export.html" class="btn btn-info">导出图书清单</a>
    </div>
    <div class="card p-3 mb-4">
      <div class="row g-3">
        <div class="col-md-4">
          <input type="text" id="searchInput" class="form-control" placeholder="搜索书名或作者...">
        </div>
        <div class="col-md-3">
          <select id="statusFilter" class="form-select">
            <option value="">所有阅读状态</option>
            <option value="已读">已读</option>
            <option value="未读">未读</option>
            <option value="在读">在读</option>
          </select>
        </div>
        <div class="col-md-3">
          <select id="categoryFilter" class="form-select">
            <option value="">所有分类</option>
            <option value="文学">文学</option>
            <option value="科幻">科幻</option>
            <option value="历史">历史</option>
            <option value="科普">科普</option>
          </select>
        </div>
        <div class="col-md-2">
          <button id="resetFilter" class="btn btn-outline-secondary w-100">重置筛选</button>
        </div>
      </div>
    </div>
  </header>

  <!-- 图书列表区域 -->
  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title">图书清单</h5>
=======
  <!-- Page Title & Operation Area -->
  <header class="mb-4">
    <h1 class="text-center mb-3">My Book Collection</h1>
    <div class="d-flex justify-content-between align-items-center">
      <a href="add-book.html" class="btn btn-success">Add New Book</a>
      <a href="export.html" class="btn btn-info">Export Book List</a>
    </div>
    <div class="card p-3 mb-4">
      <div class="row g-3">
        <div class="col-md-4">
          <input type="text" id="searchInput" class="form-control" placeholder="Search by title or author...">
        </div>
        <div class="col-md-3">
          <select id="statusFilter" class="form-select">
            <option value="">All Reading Status</option>
            <option value="Read">Read</option>
            <option value="Unread">Unread</option>
            <option value="Reading">Reading</option>
          </select>
        </div>
        <div class="col-md-3">
          <select id="categoryFilter" class="form-select">
            <option value="">All Categories</option>
            <option value="Literature">Literature</option>
            <option value="Science Fiction">Science Fiction</option>
            <option value="History">History</option>
            <option value="Popular Science">Popular Science</option>
          </select>
        </div>
        <div class="col-md-2">
          <button id="resetFilter" class="btn btn-outline-secondary w-100">Reset Filters</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Book List Area -->
  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title">Book Inventory</h5>
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
      <div id="bookList" class="table-responsive">
        <table class="table table-hover">
          <thead class="table-light">
            <tr>
<<<<<<< HEAD
              <th>书名</th>
              <th>作者</th>
              <th>ISBN</th>
              <th>阅读状态</th>
              <th>分类</th>
              <th>添加时间</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="bookTableBody">
            <!-- 图书数据将通过JavaScript动态生成 -->
            <tr>
              <td colspan="7" class="text-center text-muted">暂无图书数据，请点击"添加新图书"录入</td>
=======
              <th>Book Title</th>
              <th>Author</th>
              <th>ISBN</th>
              <th>Reading Status</th>
              <th>Category</th>
              <th>Added Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="bookTableBody">
            <!-- Book data will be dynamically generated via JavaScript -->
            <tr>
              <td colspan="7" class="text-center text-muted">No book data available. Click "Add New Book" to input books.</td>
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

<<<<<<< HEAD
  <!-- 引入数据存储模块并渲染列表 -->
  <script type="module">
    import { getAllBooks, deleteBook } from './js/data-storage.js';

    // 渲染图书列表
    function renderBookList() {
      const books = getAllBooks();
      const tableBody = document.getElementById('bookTableBody');
      
      // 清空现有内容
      tableBody.innerHTML = '';
      
      // 若没有图书，显示提示
      if (books.length === 0) {
        tableBody.innerHTML = `
          <tr>
            <td colspan="7" class="text-center text-muted">暂无图书数据，请点击"添加新图书"录入</td>
=======
  <!-- Import Data Storage Module and Render List -->
  <script type="module">
    import { getAllBooks, deleteBook } from './js/data-storage.js';
    import { filterBooks } from './js/search.js'; // Import filter function

    // Render function, supports passing filtered book list
    function renderBookList(booksToRender) {
      const tableBody = document.getElementById('bookTableBody');
      tableBody.innerHTML = '';
      
      if (booksToRender.length === 0) {
        tableBody.innerHTML = `
          <tr>
            <td colspan="7" class="text-center text-muted">No matching book data found</td>
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
          </tr>
        `;
        return;
      }
      
<<<<<<< HEAD
      // 动态生成图书行
      books.forEach(book => {
=======
      // Dynamically generate book rows
      booksToRender.forEach(book => {
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${book.title}</td>
          <td>${book.author}</td>
          <td>${book.isbn}</td>
          <td>
            <span class="badge ${
<<<<<<< HEAD
              book.status === '已读' ? 'bg-success' : 
              book.status === '在读' ? 'bg-warning' : 'bg-secondary'
=======
              book.status === 'Read' ? 'bg-success' : 
              book.status === 'Reading' ? 'bg-warning' : 'bg-secondary'
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
            }">${book.status}</span>
          </td>
          <td>${book.category}</td>
          <td>${book.addTime}</td>
          <td>
<<<<<<< HEAD
            <button class="btn btn-danger btn-sm delete-btn" data-isbn="${book.isbn}">删除</button>
=======
            <button class="btn btn-danger btn-sm delete-btn" data-isbn="${book.isbn}">Delete</button>
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
          </td>
        `;
        tableBody.appendChild(row);
      });
      
<<<<<<< HEAD
      // 绑定删除按钮事件
=======
      // Bind delete button event
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
      document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const isbn = e.target.getAttribute('data-isbn');
          if (deleteBook(isbn)) {
<<<<<<< HEAD
            // 删除成功后重新渲染列表
            renderBookList();
=======
            // Re-apply filters after successful deletion
            applyFilters();
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
          }
        });
      });
    }
    
<<<<<<< HEAD
    // 页面加载时渲染列表
    window.onload = renderBookList;
=======
    // Filter logic
    function applyFilters() {
      const searchTerm = document.getElementById('searchInput').value.trim();
      const statusFilter = document.getElementById('statusFilter').value;
      const categoryFilter = document.getElementById('categoryFilter').value;
      
      const filteredBooks = filterBooks(searchTerm, statusFilter, categoryFilter);
      renderBookList(filteredBooks);
    }
    
    // Bind filter events when page loads
    window.onload = () => {
      // Initial render of all books
      renderBookList(getAllBooks());
      
      // Real-time filtering on search input
      document.getElementById('searchInput').addEventListener('input', applyFilters);
      
      // Dropdown selection change events
      document.getElementById('statusFilter').addEventListener('change', applyFilters);
      document.getElementById('categoryFilter').addEventListener('change', applyFilters);
      
      // Reset filter button event
      document.getElementById('resetFilter').addEventListener('click', () => {
        document.getElementById('searchInput').value = '';
        document.getElementById('statusFilter').value = '';
        document.getElementById('categoryFilter').value = '';
        renderBookList(getAllBooks()); // Reset to show all books
      });
    };
>>>>>>> 1b1f78389026b1acea906391c84cb17015cbbf59
  </script>
</body>
</html>